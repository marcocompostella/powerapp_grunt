"use strict";angular.module("powerApp",["ui.router","uiRouterStyles","ngAnimate","ngAria","ngMaterial","ngMessages","ngSanitize","ngTouch","ngMdIcons","LocalStorageModule","Login","Main","Dashboard","Engage","Payment","Setting","Training","Store"]).run(["$rootScope","$state","AuthService",function(a,b,c){a.$on("$stateChangeStart",function(a,d){c.isAuthenticated()||"Login"!==d.name&&(a.preventDefault(),b.go("Login"))})}]),angular.module("powerApp").constant("API_ENDPOINT",{url:"http://powerhero.cloudno.de"}).constant("AUTH_EVENTS",{notAuthenticated:"auth-not-authenticated"}),angular.module("powerApp").config(["localStorageServiceProvider","$mdThemingProvider","$stateProvider","$urlRouterProvider","$mdDateLocaleProvider","$httpProvider",function(a,b,c,d,e,f){e.formatDate=function(a){return moment(a).format("DD-MM-YYYY")},b.theme("default").primaryPalette("grey").accentPalette("red"),f.interceptors.push("AuthInterceptor"),d.otherwise("/main"),c.state("Main",{url:"/main",data:{css:"styles/main.css"},views:{"":{templateUrl:"views/main.html",controller:"mainCtrl",controllerAs:"vm"},"Dashboard@Main":{templateUrl:"views/dashboard.html",controller:"dashCtrl",controllerAs:"vm"},"Engage@Main":{templateUrl:"views/engage.html",controller:"engageCtrl",controllerAs:"vm"},"Payment@Main":{templateUrl:"views/payment.html",controller:"paymentCtrl",controllerAs:"vm"}}}).state("Login",{url:"/login",templateUrl:"views/login.html",controller:"loginCtrl"}).state("Setting",{url:"/setting",templateUrl:"views/setting.html",controller:"settingCtrl"}).state("Store",{url:"/store",templateUrl:"views/store.html",controller:"storeCtrl"}).state("Training",{url:"/training",templateUrl:"views/training.html",controller:"trainingCtrl"})}]),angular.module("powerApp").factory("AuthInterceptor",["$rootScope","$q","AUTH_EVENTS",function(a,b,c){return{responseError:function(d){return a.$broadcast({401:c.notAuthenticated}[d.status],d),b.reject(d)}}}]),angular.module("powerApp").service("CordovaService",["$q","$window",function(a,b){var c=a.defer();this.ready=c.promise,document.addEventListener("deviceready",function(){c.resolve(b.cordova)})}]),angular.module("powerApp").service("AuthService",["$rootScope","$http","$q","API_ENDPOINT","localStorageService",function(a,b,c,d,e){function f(){var a=e.get(n);a&&g(a)}function g(a){i(a),j()}function h(a){e.set(n,a),i(a),j()}function i(a){o=!0,l=a,b.defaults.headers.common.Authorization=l,p.showBar=!0}function j(){p.showBar=!0,p.menu.sidemenu=[{icon:"dashboard",state:"Dashboard",nested:"Main",type:"l"},{icon:"directions_walk",state:"Training",nested:!1,type:"l"},{icon:"settings",state:"Setting",nested:!1,type:"l"},{icon:"logout",state:"Logout",action:"logout",type:"f"}],m.setView(p),m.initController()}function k(){l=void 0,o=!1,b.defaults.headers.common.Authorization=void 0,p.showBar=!1,e.remove(n)}var l,m=this,n="tokenKey",o=!1,p={showBar:!1,menu:{}},q=function(a){return c(function(c,e){b.post(d.url+"/mobileAuth",a).then(function(a){a.data.success?(h(a.data.token),c(a.data.user)):e(a.data.msg)})})},r=function(){k(),p.showBar=!1,p.menu.sidemenu={},p.menu.moremenu={},m.setView(p)},s=function(a,b){m.setView=a,m.initController=b,f()};return{init:s,login:q,logout:r,isAuthenticated:function(){return o}}}]),angular.module("powerApp").service("CommonService",function(){var a=this;a.user=null;var b=function(){},c=function(){return a.user},d=function(b){a.user=b};return{init:b,setUser:d,getUser:c}}),angular.module("powerApp").controller("appCtrl",["$scope","$mdSidenav","$state","AuthService","CommonService","AUTH_EVENTS",function(a,b,c,d,e,f){function g(){b("left").toggle()}function h(){window.history.back()}function i(a){j.selected=a;var b=a.state;if("l"===a.type)a.nested!==!1&&(b=a.nested),c.go(b);else if("f"===a.type)switch(a.action){case"logout":this.logout()}}var j=this;j.menuOptions=[];var k=function(b){a.isLogged=b.showBar,b.showBar&&(j.sidemenu=b.menu.sidemenu)},l=function(){e.init(),j.selected=c.current};d.init(k,l),a.$on(f.notAuthenticated,function(){this.logout()});var m;this.openMenu=function(a,b){m=b,a(b)},this.logout=function(){d.logout(),c.go("Login")},j.selectItem=i,j.toggleList=g,j.back=h}]),angular.module("Login",[]).controller("loginCtrl",["$scope","$state","AuthService","CommonService",function(a,b,c,d){a.login={username:"",password:"",remember:!1},a.loginPost=function(){c.login(a.login).then(function(a){d.setUser(a),b.go("Main")},function(){})},a.clear=function(){a.login={remember:!1}}}]),angular.module("Main",[]).controller("mainCtrl",function(){}),angular.module("Dashboard",["ngRateIt"]).controller("dashCtrl",["$scope","CordovaService","CommonService",function(a,b,c){function d(a){var b=document.getElementById("myImage");b.src=a}function e(a){console.log(a)}a.model={basic:0,readonly:2.5,readonly_enables:!0,minMaxStep:6,minMaxStep2:8.75,pristine:3,resetable:4,heightWidth:1.5,callbacks:5,custom:4},a.user=c.getUser(),a.getPicture=function(){navigator.camera.getPicture(d,e,{quality:50,destinationType:Camera.DestinationType.FILE_URI})},b.ready.then(function(){console.log("ok")})}]),angular.module("Engage",[]).controller("engageCtrl",function(){}),angular.module("Payment",[]).controller("paymentCtrl",function(){}),angular.module("Setting",[]).controller("settingCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("Training",[]).controller("trainingCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("Store",[]).controller("storeCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("powerApp").run(["$templateCache",function(a){a.put("views/dashboard.html",'<md-content layout="column" layout-fill layout-align="start center"> <img src="http://placekitten.com/g/400/200" class="image"> <ng-rate-it min="0" max="5" ng-model="model.resetable" resetable="false"></ng-rate-it> <p>{{user.nome}} {{user.cognome}}</p> <md-content ng-if="1==2"> <md-card> <md-card-title> <md-card-title-text> <span class="md-headline">Action required</span> </md-card-title-text> </md-card-title> <md-card-content> <p> status payment </p> <p> status scheda </p> </md-card-content> <md-card-actions layout="row" layout-align="end end"> <md-button>Action 1</md-button> </md-card-actions> </md-card> </md-content> <md-button ng-click="getPicture()">click</md-button> <md-fab-speed-dial md-direction="up" md-open="false" class="md-scale md-fab-bottom-right md-hover-full speed-dial"> <md-fab-trigger> <md-button class="md-fab"> <ng-md-icon icon="bubble_chart"></ng-md-icon> </md-button> </md-fab-trigger> <md-fab-actions> <md-button class="md-fab md-mini"> <ng-md-icon icon="play_arrow"></ng-md-icon> <md-tooltip md-direction="left">Start training</md-tooltip> </md-button> </md-fab-actions> </md-fab-speed-dial> </md-content>'),a.put("views/engage.html","<p>This is the Engage view.</p>"),a.put("views/login.html",'<md-content flex layout="row" layout-align="center center"> <md-card> <md-card-content flex> <section layout="column" layout-sm="column" layout-align="center center" layout-wrap> <md-input-container> <label>Username</label> <input ng-model="login.username"> </md-input-container> <md-input-container> <label>Password</label> <input ng-model="login.password" type="password"> </md-input-container> </section> <section layout="column" layout-sm="row" layout-align="center center" layout-wrap> <md-checkbox ng-model="login.remember">Remember me</md-checkbox> </section> <section layout="row" layout-sm="row" layout-align="center center" layout-wrap> <md-button ng-click="loginPost()" class="md-raised md-primary">Login</md-button> <md-button ng-click="clear()" class="md-raised md-primary">Clear</md-button> </section> </md-card-content> </md-card> </md-content>'),a.put("views/main.html",'<md-content> <md-tabs md-dynamic-height md-border-bottom md-swipe-content="true" md-selected="selectedIndex"> <md-tab label="Dashboard"> <md-content class="md-padding"> <div ui-view="Dashboard"></div> </md-content> </md-tab> <md-tab label="Engage"> <md-content class="md-padding"> <div ui-view="Engage"></div> </md-content> </md-tab> <md-tab label="Payment"> <md-content class="md-padding"> <div ui-view="Payment"></div> </md-content> </md-tab> </md-tabs> </md-content>'),a.put("views/payment.html","<p>This is the payment view.</p>"),a.put("views/setting.html","<p>This is the setting view.</p>"),a.put("views/store.html","<p>This is the store view.</p>"),a.put("views/training.html","<p>This is the training view.</p>")}]);